<!doctype html>
<html>
<head>
<link rel="stylesheet" href="/style.css">
<script>
function loadHTTP(url, callback) {
	var xmlhttp = new XMLHttpRequest();
	xmlhttp.onreadystatechange = function() {
		if (xmlhttp.readyState == 4) {
			callback(xmlhttp.responseText.trim());
		}
	};
	xmlhttp.open("GET", url, true);
	xmlhttp.send();
}
function setTaxRate(rate) {
	rate *= 1;
	document.getElementById("tax").title = rate + "%";
}
function textAppend(value) {
	document.getElementById("amountbox").value += value;
}
function textRemove() {
	var field = document.getElementById("amountbox"),
	value = field.value;
	field.value = value.substring(0, value.length - 1);
}
function addTax() {
	var field = document.getElementById("amountbox"),
	title = document.getElementById("tax").title,
	tax = title.substring(0, title.length - 1) / 100 + 1;
	field.value = (field.value * tax).toFixed(0);
}
</script>
</head>

<body onload="loadHTTP('taxrate.txt', setTaxRate)">
<form method="post" name="" action="">
<table>
<tr>
<td colspan="4">
<input type="number" class="text" id="amountbox" name="amount" min="0"></td>
<tr>
<td><input type="button" value="1" onclick="textAppend(1)"></td>
<td><input type="button" value="2" onclick="textAppend(2)"></td>
<td><input type="button" value="3" onclick="textAppend(3)"></td>
<td><input type="button" class="back" value="&#9003;" onclick="textRemove()"></td>
</tr>
<tr>
<td><input type="button" value="4" onclick="textAppend(4)"></td>
<td><input type="button" value="5" onclick="textAppend(5)"></td>
<td><input type="button" value="6" onclick="textAppend(6)"></td>
<td><input type="reset" class="clear" value="C"></td>
</tr>
<tr>
<td><input type="button" value="7" onclick="textAppend(7)"></td>
<td><input type="button" value="8" onclick="textAppend(8)"></td>
<td><input type="button" value="9" onclick="textAppend(9)"></td>
</tr>
<tr>
<td><input type="button" value="00" onclick="textAppend(0);textAppend(0)"></td>
<td><input type="button" value="0" onclick="textAppend(0)"></td>
<td><input type="button" id="tax" value="%" onclick="addTax()"></td>
<td><input type="submit" class="ok" value="&#10003;"></td>
</tr>
</table>
</form>
</body>
</html>
